Qualtrics.SurveyEngine.addOnload(function() {
  // Replace "QR~QID616" with the actual textarea ID
  var $textArea = jQuery("#QR~QID616");
  var $charCountSpan = jQuery("#QID616-RemainingChars");

  // Initially hide the character count off-screen
  $charCountSpan.css({ position: "absolute", left: "-9999px" });

  $textArea.on("input", function() {
    var text = $textArea.val();
    var charCount = text.length;
    var remainingChars = 300 - charCount;

    if (charCount >= 10) {
      // Show the character count if 10 or more characters have been entered
      $charCountSpan.css({ position: "static", left: "auto" });
    } else {
      // Hide the character count off-screen if fewer than 10 characters have been entered
      $charCountSpan.css({ position: "absolute", left: "-9999px" });
    }

    // Update the remaining character count
    $charCountSpan.find("span[data-runtime-text='runtime.CharsRemaining']").text(remainingChars);
  });
});
