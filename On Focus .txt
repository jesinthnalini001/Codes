Qualtrics.SurveyEngine.addOnload(function() {
    const freetextQuestionId = 'QID3'; // Replace with your freetext question ID
    const freetextInput = jQuery(`#${freetextQuestionId} .InputText`);
    const alertTrigger = jQuery('<button id="liveAlertBtn">Trigger Alert</button>');

    if (freetextInput.length) {
        freetextInput.after(alertTrigger);

        alertTrigger.on('click', function() {
            const response = freetextInput.val();
            const wordLimit = 300;

            if (response.split(/\s+/).length > wordLimit) {
                appendAlert('Your response is too long. Please limit your response to ' + wordLimit + ' words.', 'danger');
            } else {
                appendAlert('Nice, you triggered this alert message!', 'success');
            }
        });
    }

    function appendAlert(message, type) {
        const wrapper = jQuery(
            `<div class="alert alert-${type} alert-dismissible" role="alert">
                <div>${message}</div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>`
        );

        jQuery('.Skin .QuestionBody').append(wrapper);
    }
});
